= Create an Agent Gateway

This guide walks you through deploying an instance of the `AgentGateway` custom resource.

An `AgentGateway` is like a Kubernetes https://kubernetes.io/docs/concepts/services-networking/gateway/#api-kind-gateway[Gateway] in that there might be many different implementations (also known as "classes"). Example implementations of the Kubernetes Gateway specification include Envoy Gateway, Cilium, or `amazon-vpc-lattice`).

One implementation of the `AgentGateway` specification is based on KrakenD. This guide explains how to instantiate one such instance of an `AgentGateway`.

TIP: Before following this guide, make sure you have some kind of Agent Gateway Operator installed. See xref:agent-gateway-krakend-operator:operator:how-to-guide.adoc[Install the Agent Gateway KrakenD Operator] for one example.

== Create an AgentGateway Resource

. Create a AgentGateway resource file:
+
[source,yaml]
----
apiVersion: runtime.agentic-layer.ai/v1alpha1
kind: AgentGateway
metadata:
  name: agent-gateway
  namespace: agent-gateway
spec:
  replicas: 1
  timeout: 5m0s
----

. Apply the configuration:
+
[source,bash]
----
kubectl apply -f my-agentgateway.yaml
----

== Verify the Deployment

. Check the AgentGateway status:
+
[source,bash]
----
kubectl get agentgateways agent-gateway -n agent-gateway
----

. Verify the created resources:
+
[source,bash]
----
# Check the deployment created by the operator
kubectl get deployments -l app=agent-gateway -A

# Check the service
kubectl get services -l app=agent-gateway -A

# Check the configmap with KrakenD configuration
kubectl get configmaps agent-gateway-krakend-config -n agent-gateway
----

. Check the pod logs to ensure KrakenD started successfully:
+
[source,bash]
----
kubectl logs -l app=agent-gateway -n agent-gateway
----

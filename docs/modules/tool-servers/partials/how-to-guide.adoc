= Create a Tool Server

This guide walks you through creating and deploying tool servers using the Agent Runtime Operator. Tool servers extend your agents' capabilities by providing external tools and functionality through the Model Context Protocol (MCP).

IMPORTANT: Before following this guide, make sure you have the Agent Runtime Operator installed. See xref:agent-runtime-operator:agent-runtime:how-to-guide.adoc[Install the Agent Runtime Operator] for installation instructions.

== Quick Start: Your First Tool Server

Get your first tool server running in under 5 minutes.

=== Deploy your first tool server

[source,bash]
----
# Create a tool server using the Context7 MCP server (provides up-to-date code docs)
cat <<EOF | kubectl apply -f -
apiVersion: runtime.agentic-layer.ai/v1alpha1
kind: ToolServer
metadata:
  name: context7-toolserver
spec:
  protocol: mcp
  transportType: http
  image: mcp/context7:latest
  port: 8080
  replicas: 2
  env:
    - name: LOGLEVEL
      value: INFO
EOF
----

=== Verify your tool server is running

[source,bash]
----
# Check the tool server resource
kubectl get toolserver context7-toolserver

# Check the deployment
kubectl get deployment context7-toolserver

# Check the service
kubectl get service context7-toolserver
----

=== Check the logs

[source,bash]
----
# View tool server logs
kubectl logs -l app=context7-toolserver
----

ðŸŽ‰ *Congratulations!* You've successfully deployed your first tool server.

== Using Tool Servers with Agents

To connect a tool server to your agent, reference it using `toolServerRef`:

NOTE: Replace `your-gemini-api-key-here` with your actual Gemini API key before deploying.

[source,yaml]
----
apiVersion: runtime.agentic-layer.ai/v1alpha1
kind: Agent
metadata:
  name: coding-assistant
spec:
  framework: google-adk
  description: "A coding assistant with access to up-to-date documentation"
  instruction: "You are a helpful coding assistant. Use the context7 tool to fetch up-to-date documentation for libraries and frameworks to help answer coding questions accurately."
  model: "gemini/gemini-2.5-flash"
  tools:
    - name: context7_tools
      toolServerRef:
        name: context7-toolserver
  protocols:
    - type: A2A
  replicas: 1
  env:
    - name: GEMINI_API_KEY
      value: "your-gemini-api-key-here"
----

The operator automatically wires the agent to the tool server using the ToolServer's name.

For more details on creating and configuring agents, see xref:agent-runtime-operator:agents:how-to-guide.adoc[Create an AI Agent].

Happy tool server building! ðŸ”§
